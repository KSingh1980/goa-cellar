{"swagger":"2.0","info":{"title":"The virtual wine cellar","description":"A basic example of a CRUD API implemented with goa","contact":{"name":"goa team","email":"admin@goa.design","url":"http://goa.design"},"license":{"name":"MIT","url":"https://github.com/goadesign/goa/blob/master/LICENSE"},"version":""},"host":"goa-cellar.appspot.com","basePath":"/api","schemes":["https"],"consumes":["application/json","application/xml","application/gob","application/x-gob"],"produces":["application/json","application/xml","application/gob","application/x-gob"],"paths":{"/_ah/health":{"get":{"tags":["health"],"summary":"health health","description":"Perform health check.","operationId":"health#health","responses":{"200":{"description":"OK"}},"schemes":["https"]}},"/accounts":{"get":{"tags":["account"],"summary":"list account","description":"Retrieve all accounts.","operationId":"account#list","responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AccountCollection"}}},"schemes":["https"]},"post":{"tags":["account"],"summary":"create account","description":"Create new account","operationId":"account#create","parameters":[{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/CreateAccountPayload"}}],"responses":{"201":{"description":"Resource created","headers":{"Location":{"description":"href to created resource","type":"string","pattern":"/accounts/[0-9]+"}}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}}},"schemes":["https"]}},"/accounts/{accountID}":{"get":{"tags":["account"],"summary":"show account","description":"Retrieve account with given id. IDs 1 and 2 pre-exist in the system.","operationId":"account#show","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Account"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]},"put":{"tags":["account"],"summary":"update account","description":"Change account name","operationId":"account#update","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer"},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/UpdateAccountPayload"}}],"responses":{"204":{"description":"No Content"},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]},"delete":{"tags":["account"],"summary":"delete account","operationId":"account#delete","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer"}],"responses":{"204":{"description":"No Content"},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]}},"/accounts/{accountID}/bottles":{"get":{"tags":["bottle"],"summary":"list bottle","description":"List all bottles in account optionally filtering by year","operationId":"bottle#list","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"years","in":"query","description":"Filter by years","required":false,"type":"array","items":{"type":"integer"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/BottleCollection"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]},"post":{"tags":["bottle"],"summary":"create bottle","description":"Record new bottle","operationId":"bottle#create","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/CreateBottlePayload"}}],"responses":{"201":{"description":"Resource created","headers":{"Location":{"description":"href to created resource","type":"string","pattern":"^/accounts/[0-9]+/bottles/[0-9]+$"}}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]}},"/accounts/{accountID}/bottles/{bottleID}":{"get":{"tags":["bottle"],"summary":"show bottle","description":"Retrieve bottle with given id","operationId":"bottle#show","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"bottleID","in":"path","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Bottle"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]},"delete":{"tags":["bottle"],"summary":"delete bottle","operationId":"bottle#delete","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"bottleID","in":"path","required":true,"type":"integer"}],"responses":{"204":{"description":"No Content"},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]},"patch":{"tags":["bottle"],"summary":"update bottle","operationId":"bottle#update","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"bottleID","in":"path","required":true,"type":"integer"},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/BottlePayload"}}],"responses":{"204":{"description":"No Content"},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]}},"/accounts/{accountID}/bottles/{bottleID}/actions/rate":{"put":{"tags":["bottle"],"summary":"rate bottle","operationId":"bottle#rate","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"bottleID","in":"path","required":true,"type":"integer"},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/RateBottlePayload"}}],"responses":{"204":{"description":"No Content"},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}},"404":{"description":"Not Found"}},"schemes":["https"]}},"/accounts/{accountID}/bottles/{bottleID}/watch":{"get":{"tags":["bottle"],"summary":"watch bottle","description":"Retrieve bottle with given id","operationId":"bottle#watch","parameters":[{"name":"accountID","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"bottleID","in":"path","required":true,"type":"integer"}],"responses":{"101":{"description":"Switching Protocols"},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/error"}}},"schemes":["ws"]}},"/auth/info/basic":{"get":{"tags":["auth"],"summary":"basic auth","operationId":"auth#basic","responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Auth"}}},"schemes":["https"],"security":[{"api_key":[]}]}},"/auth/info/jwt":{"get":{"tags":["auth"],"summary":"jwt auth","operationId":"auth#jwt","responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Auth"}}},"schemes":["https"],"security":[{"jwt":[]}]}}},"definitions":{"Account":{"title":"Mediatype identifier: application/vnd.goa-cellar.account+json; view=default","type":"object","properties":{"created_at":{"type":"string","description":"Date of creation","example":"2015-09-23T11:51:57-07:00","format":"date-time"},"created_by":{"type":"string","description":"Email of account owner","example":"me@goa.design","format":"email"},"href":{"type":"string","description":"API href of account","example":"/accounts/1"},"id":{"type":"integer","description":"ID of account","example":1,"format":"int64"},"name":{"type":"string","description":"Name of account","example":"test"}},"description":"A tenant account (default view)","example":{"created_at":"2015-09-23T11:51:57-07:00","created_by":"me@goa.design","href":"/accounts/1","id":1,"name":"test"},"required":["id","href","name","created_at","created_by"]},"AccountCollection":{"title":"Mediatype identifier: application/vnd.goa-cellar.account+json; type=collection","type":"array","items":{"$ref":"#/definitions/Account"},"description":"AccountCollection is the media type for an array of Account (default view)","example":[{"created_at":"2015-09-23T11:51:57-07:00","created_by":"me@goa.design","href":"/accounts/1","id":1,"name":"test"}]},"AccountLink":{"title":"Mediatype identifier: application/vnd.goa-cellar.account+json; view=link","type":"object","properties":{"href":{"type":"string","description":"API href of account","example":"/accounts/1"},"id":{"type":"integer","description":"ID of account","example":1,"format":"int64"}},"description":"A tenant account (link view)","example":{"href":"/accounts/1","id":1},"required":["id","href"]},"AccountTiny":{"title":"Mediatype identifier: application/vnd.goa-cellar.account+json; view=tiny","type":"object","properties":{"href":{"type":"string","description":"API href of account","example":"/accounts/1"},"id":{"type":"integer","description":"ID of account","example":1,"format":"int64"},"name":{"type":"string","description":"Name of account","example":"test"}},"description":"A tenant account (tiny view)","example":{"href":"/accounts/1","id":1,"name":"test"},"required":["id","href","name"]},"Auth":{"title":"Mediatype identifier: application/vnd.goa-cellar.auth+json","type":"object","properties":{"info":{"type":"object","description":"User info","example":{"Tenetur officia tenetur et saepe ratione.":"1970-02-20T18:43:19-08:00"},"additionalProperties":true}},"description":"User info extracted from security token (default view)","example":{"info":{"Tenetur officia tenetur et saepe ratione.":"1970-02-20T18:43:19-08:00"}},"required":["info"]},"Bottle":{"title":"Mediatype identifier: application/vnd.goa-cellar.bottle+json; view=default","type":"object","properties":{"account":{"$ref":"#/definitions/AccountTiny"},"href":{"type":"string","description":"API href of bottle","example":"/accounts/1/bottles/1"},"id":{"type":"integer","description":"ID of bottle","example":1,"format":"int64"},"links":{"$ref":"#/definitions/BottleLinks"},"name":{"type":"string","example":"Number 8","minLength":2},"rating":{"type":"integer","description":"Rating of bottle between 1 and 5","example":3,"minimum":1,"maximum":5},"varietal":{"type":"string","example":"Merlot","minLength":4},"vineyard":{"type":"string","example":"Asti","minLength":2},"vintage":{"type":"integer","example":2012,"minimum":1900,"maximum":2020}},"description":"A bottle of wine (default view)","example":{"account":{"created_at":"2015-09-23T11:51:57-07:00","created_by":"me@goa.design","href":"/accounts/1","id":1,"name":"test"},"href":"/accounts/1/bottles/1","id":1,"links":{"account":{"href":"/accounts/1","id":1}},"name":"Number 8","rating":3,"varietal":"Merlot","vineyard":"Asti","vintage":2012},"required":["id","href","name","vineyard","varietal","vintage"]},"BottleCollection":{"title":"Mediatype identifier: application/vnd.goa-cellar.bottle+json; type=collection","type":"array","items":{"$ref":"#/definitions/Bottle"},"description":"BottleCollection is the media type for an array of Bottle (default view)","example":[{"account":{"created_at":"2015-09-23T11:51:57-07:00","created_by":"me@goa.design","href":"/accounts/1","id":1,"name":"test"},"href":"/accounts/1/bottles/1","id":1,"links":{"account":{"href":"/accounts/1","id":1}},"name":"Number 8","rating":3,"varietal":"Merlot","vineyard":"Asti","vintage":2012},{"account":{"created_at":"2015-09-23T11:51:57-07:00","created_by":"me@goa.design","href":"/accounts/1","id":1,"name":"test"},"href":"/accounts/1/bottles/1","id":1,"links":{"account":{"href":"/accounts/1","id":1}},"name":"Number 8","rating":3,"varietal":"Merlot","vineyard":"Asti","vintage":2012},{"account":{"created_at":"2015-09-23T11:51:57-07:00","created_by":"me@goa.design","href":"/accounts/1","id":1,"name":"test"},"href":"/accounts/1/bottles/1","id":1,"links":{"account":{"href":"/accounts/1","id":1}},"name":"Number 8","rating":3,"varietal":"Merlot","vineyard":"Asti","vintage":2012}]},"BottleLinks":{"title":"BottleLinks","type":"object","properties":{"account":{"$ref":"#/definitions/AccountLink"}},"description":"BottleLinks contains links to related resources of Bottle.","example":{"account":{"href":"/accounts/1","id":1}}},"BottlePayload":{"title":"BottlePayload","type":"object","properties":{"color":{"type":"string","example":"yellow","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","example":"USA","minLength":2},"name":{"type":"string","example":"Number 8","minLength":2},"region":{"type":"string","example":"Napa Valley"},"review":{"type":"string","example":"Great and inexpensive","minLength":3,"maxLength":300},"sweetness":{"type":"integer","example":4,"minimum":1,"maximum":5},"varietal":{"type":"string","example":"Merlot","minLength":4},"vineyard":{"type":"string","example":"Asti","minLength":2},"vintage":{"type":"integer","example":2012,"minimum":1900,"maximum":2020}},"example":{"color":"yellow","country":"USA","name":"Number 8","region":"Napa Valley","review":"Great and inexpensive","sweetness":4,"varietal":"Merlot","vineyard":"Asti","vintage":2012}},"CreateAccountPayload":{"title":"CreateAccountPayload","type":"object","properties":{"name":{"type":"string","description":"Name of account","example":"test"}},"example":{"name":"test"},"required":["name"]},"CreateBottlePayload":{"title":"CreateBottlePayload","type":"object","properties":{"color":{"type":"string","example":"yellow","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","example":"USA","minLength":2},"name":{"type":"string","example":"Number 8","minLength":2},"region":{"type":"string","example":"Napa Valley"},"review":{"type":"string","example":"Great and inexpensive","minLength":3,"maxLength":300},"sweetness":{"type":"integer","example":4,"minimum":1,"maximum":5},"varietal":{"type":"string","example":"Merlot","minLength":4},"vineyard":{"type":"string","example":"Asti","minLength":2},"vintage":{"type":"integer","example":2012,"minimum":1900,"maximum":2020}},"example":{"color":"yellow","country":"USA","name":"Number 8","region":"Napa Valley","review":"Great and inexpensive","sweetness":4,"varietal":"Merlot","vineyard":"Asti","vintage":2012},"required":["name","vineyard","varietal","vintage","color"]},"RateBottlePayload":{"title":"RateBottlePayload","type":"object","properties":{"rating":{"type":"integer","description":"Rating of bottle between 1 and 5","example":4,"minimum":1,"maximum":5}},"example":{"rating":4},"required":["rating"]},"UpdateAccountPayload":{"title":"UpdateAccountPayload","type":"object","properties":{"name":{"type":"string","description":"Name of account","example":"test"}},"example":{"name":"test"},"required":["name"]},"error":{"title":"Mediatype identifier: application/vnd.goa.error","type":"object","properties":{"code":{"type":"string","description":"an application-specific error code, expressed as a string value.","example":"invalid_value"},"detail":{"type":"string","description":"a human-readable explanation specific to this occurrence of the problem.","example":"Value of ID must be an integer"},"id":{"type":"string","description":"a unique identifier for this particular occurrence of the problem.","example":"3F1FKVRR"},"meta":{"type":"object","description":"a meta object containing non-standard meta-information about the error.","example":{"timestamp":1458609066},"additionalProperties":true},"status":{"type":"string","description":"the HTTP status code applicable to this problem, expressed as a string value.","example":"400"}},"description":"Error response media type (default view)","example":{"code":"invalid_value","detail":"Value of ID must be an integer","id":"3F1FKVRR","meta":{"timestamp":1458609066},"status":"400"}}},"responses":{"NoContent":{"description":"No Content"},"NotFound":{"description":"Not Found"},"OK":{"description":"OK","schema":{"$ref":"#/definitions/Account"}},"SwitchingProtocols":{"description":"Switching Protocols"}},"securityDefinitions":{"api_key":{"type":"apiKey","name":"key","in":"query","authorizationUrl":""},"jwt":{"authorizationUrl":"","flow":"implicit","type":"oauth2","x-issuer":"jwt-client.endpoints.sample.google.com","x-jwks_uri":"https://www.googleapis.com/service_accounts/v1/jwk/account-1@goa-swagger.iam.gserviceaccount.com"}},"externalDocs":{"description":"goa guide","url":"http://goa.design/getting-started.html"}}